<!--
title: Show NAT Connects
description: Просмотр nat соединений
published: true
date: 2023-02-23T07:34:24.216Z
tags: linux, nat, show, connect
editor: ckeditor
dateCreated: 2023-02-23T07:15:49.654Z
-->

<p>Для того, чтобы их посмотреть, можно установить&nbsp;conntrack:</p>
<pre><code class="language-plaintext">Debian/Ubuntu:
sudo apt-get install&nbsp;conntrack

RedHat/CentOS
sudo dnf install conntrack-tools</code></pre>
<p><strong>Примеры использования:</strong></p>
<p>Просмотр текущих соединений</p>
<pre><code class="language-plaintext">conntrack -L</code></pre>
<p>Просмотр всех <a href="https://pc.ru/docs/network/tcp">tcp</a> соединений на порт 80</p>
<pre><code class="language-plaintext">conntrack -L -p tcp --dport 80</code></pre>
<p>Просмотр в реальном времени всех соединений и их статуса</p>
<pre><code class="language-plaintext">conntrack -E</code></pre>
<p>Просмотр в реальном времени всех соединений для ip 192.168.0.10</p>
<pre><code class="language-plaintext">conntrack -E | grep 192.168.0.10</code></pre>
<p><strong>Справка по ключам:</strong></p>
<pre><code class="language-plaintext">Command line interface for the connection tracking system. Version 1.4.4
Usage: conntrack [commands] [options]

Commands:
 -L [table] [options]  List conntrack or expectation table
 -G [table] parameters  Get conntrack or expectation
 -D [table] parameters  Delete conntrack or expectation
 -I [table] parameters  Create a conntrack or expectation
 -U [table] parameters  Update a conntrack
 -E [table] [options]  Show events
 -F [table]   Flush table
 -C [table]   Show counter
 -S    Show statistics

Tables: conntrack, expect, dying, unconfirmed

Conntrack parameters and options:
 -n, --src-nat ip   source NAT ip
 -g, --dst-nat ip   destination NAT ip
 -j, --any-nat ip   source or destination NAT ip
 -m, --mark mark   Set mark
 -c, --secmark secmark   Set selinux secmark
 -e, --event-mask eventmask  Event mask, eg. NEW,DESTROY
 -z, --zero     Zero counters while listing
 -o, --output type[,...]  Output format, eg. xml
 -l, --label label[,...]  conntrack labels

Expectation parameters and options:
 --tuple-src ip Source address in expect tuple
 --tuple-dst ip Destination address in expect tuple

Updating parameters and options:
 --label-add label Add label
 --label-del label Delete label

Common parameters and options:
 -s, --src, --orig-src ip  Source address from original direction
 -d, --dst, --orig-dst ip  Destination address from original direction
 -r, --reply-src ip  Source addres from reply direction
 -q, --reply-dst ip  Destination address from reply direction
 -p, --protonum proto  Layer 4 Protocol, eg. 'tcp'
 -f, --family proto  Layer 3 Protocol, eg. 'ipv6'
 -t, --timeout timeout  Set timeout
 -u, --status status  Set status, eg. ASSURED
 -w, --zone value  Set conntrack zone
 --orig-zone value  Set zone for original direction
 --reply-zone value  Set zone for reply direction
 -b, --buffer-size  Netlink socket buffer size
 --mask-src ip   Source mask address
 --mask-dst ip   Destination mask address</code></pre>
<p>&nbsp;</p>

<!--
title: DD command
description: Примеры
published: true
date: 2022-08-18T08:28:14.011Z
tags: linux, dd, copy, disk, ssh
editor: ckeditor
dateCreated: 2022-08-18T08:16:04.296Z
-->

<p><strong>dd&nbsp;if=источник_копирования of=место_назначения параметры</strong></p>
<p><u>Параметры:</u></p>
<ul>
  <li><strong>bs</strong> - указывает сколько байт читать и записывать за один раз;</li>
  <li><strong>cbs</strong> - сколько байт нужно записывать за один раз;</li>
  <li><strong>count</strong> - скопировать указанное количество блоков, размер одного блока указывается в параметре bs;</li>
  <li><strong>conv</strong> - применить фильтры к потоку данных;</li>
  <li><strong>ibs</strong> - читать указанное количество байт за раз - <strong>с</strong> - один символ;</li>
  <li><strong>obs</strong> - записывать указанное количество байт за раз;</li>
  <li><strong>seek</strong> - пропустить указанное количество байт в начале устройства для чтения;</li>
  <li><strong>skip</strong> - пропустить указанное количество байт в начале устройства вывода;</li>
  <li><strong>status</strong> - указывает насколько подробным нужно сделать вывод;</li>
  <li><strong>iflag, oflag</strong> - позволяет задать дополнительные флаги работы для устройства ввода и вывода,&nbsp;основные из них: nocache,&nbsp;nofollow.</li>
</ul>
<p><u>Сокращения для размера :</u></p>
<ul>
  <li><strong>с</strong> - один символ;</li>
  <li><strong>b</strong> - 512 байт;</li>
  <li><strong>kB</strong> - 1000 байт;</li>
  <li><strong>K</strong> - 1024 байт;</li>
  <li><strong>MB</strong> - 1000 килобайт;</li>
  <li><strong>M</strong> - 1024 килобайт;</li>
  <li><strong>GB</strong> - 1000 мегабайт;</li>
  <li><strong>G</strong> - 1024 мегабайт.</li>
</ul>
<p>- Пример частичной очистки / заполнение нулями диска :<br><i>dd if=/dev/zero of=file.img bs=1M count=512</i></p>
<p>- Пример создания резервной копии локального диска на удаленной сервере через ssh:<br><i>sudo dd if=/dev/sda | gzip -9 - | ssh user@host “dd of=/tmp/sda.image.gz bs=8M status=progress”</i></p>
<p>- Пример востановления локального диска из резервной копии с удаленого серевера через ssh:<br><i>ssh user@host &nbsp;“sudo dd if=/tmp/sda.image.gz | gunzip -” | sudo dd of=/dev/sda bs=2M status=progress</i></p>
<p>- Пример прямого копирования удаленого диска на локальный через ssh:<br><i>ssh user@host &nbsp;“sudo dd if=/dev/sda | gzip -9 -" | gunzip - | dd of=/dev/sda bs=2M status=progress</i></p>
<p><mark class="marker-yellow">Обрашаю внимание, что команды gzip и gunzip используемы для сжатия потока данных при прямом копирование можно и не использовать.&nbsp;</mark></p>
<p><mark class="marker-pink">Иногда при использование <strong>sudo </strong>на удаленной машинке через<strong> ssh,</strong> возникает ошибка: “</mark><i><mark class="marker-pink"><strong>sudo: sorry, you must have a tty to run sudo</strong></mark></i><mark class="marker-pink">” … для ее устранения достаточно в файл<strong> /etc/sudoers</strong> добавить строчку “</mark><i><mark class="marker-pink"><strong>Defaults:имя_пользователя !requiretty</strong></mark></i><mark class="marker-pink"><strong>”</strong> для определеного пользователя … в некоторых случаях может потребоваться строка “</mark><i><mark class="marker-pink"><strong>Defaults!/path/to/bin !requiretty</strong></mark></i><mark class="marker-pink"><strong>”</strong> с указвнием пути <strong>/path/to/bin</strong> расположения к исполняему файлу.</mark></p>
<p>&nbsp;</p>
<p>Стандартная справка &nbsp;-----------------------------------------------------------------------------------------------------------------------------------------------------------</p>
<p><strong># dd --help</strong></p>
<p>Использование: dd [ОПЕРАНД]… или: &nbsp; &nbsp;dd ПАРАМЕТР</p>
<p>Копирует файл, преобразует и форматирует в зависимости от операндов.</p>
<p>&nbsp;bs=ЧИСЛО &nbsp; &nbsp; &nbsp; &nbsp;читать и писать до ЧИСЛА байт за раз (по умолчанию 512)</p>
<p>&nbsp;cbs=ЧИСЛО &nbsp; &nbsp; &nbsp; преобразовывать заданное ЧИСЛО байт за раз</p>
<p>&nbsp;conv=СПИСОК &nbsp; &nbsp; преобразовывать файл в соответствии со СПИСКОМ символов, &nbsp;элементы перечисляются через запятую</p>
<p>&nbsp;count=ЧИСЛО &nbsp; &nbsp; копировать только заданное ЧИСЛО входных блоков</p>
<p>&nbsp;ibs=ЧИСЛО &nbsp; &nbsp; &nbsp; считывать до ЧИСЛА байт за раз (по умолчанию 512)</p>
<p>&nbsp;if=ФАЙЛ &nbsp; &nbsp; &nbsp; &nbsp; читать ФАЙЛ, а не стандартный ввод</p>
<p>&nbsp;iflag=ФЛАГИ &nbsp; &nbsp; читать в соответствии со списком символов, &nbsp; элементы перечисляются через запятую</p>
<p>&nbsp;obs=ЧИСЛО &nbsp; &nbsp; &nbsp; записывать заданное ЧИСЛО байт за раз (по умолчанию 512)</p>
<p>&nbsp;of=ФАЙЛ &nbsp; &nbsp; &nbsp; &nbsp; записывать в ФАЙЛ, а не на стандартный вывод</p>
<p>&nbsp;oflag=ФЛАГИ &nbsp; &nbsp; записывать в соответствии со списком символов, элементы перечисляются через запятую</p>
<p>&nbsp;seek=ЧИСЛО &nbsp; &nbsp; &nbsp;пропустить перед началом вывода заданное ЧИСЛО блоков размером obs</p>
<p>&nbsp;skip=ЧИСЛО &nbsp; &nbsp; &nbsp;пропустить перед началом ввода заданное ЧИСЛО блоков размером ibs</p>
<p>&nbsp;status=ИНФО &nbsp; &nbsp; заданную ИНФОрмацию не выводить в stderr;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;«noxfer» — не выводить статистику передачи</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;«none» &nbsp;— не выводить ничего</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;«progress» — показывать индикатор передачи</p>
<p>&nbsp;</p>
<p>После ЧИСЛА блоков и байт может стоять один из умножающий суффиксов:</p>
<p>c =1, w =2, b =512, kB =1000, K =1024, MB =1000*1000, M =1024*1024, xM =M,</p>
<p>GB =1000*1000*1000, G =1024*1024*1024 и так далее для T, P, E, Z, Y.</p>
<p>&nbsp;</p>
<p>Каждый символ СПИСКА может быть:</p>
<p>&nbsp;ascii &nbsp; &nbsp; из EBCDIC в ASCII</p>
<p>&nbsp;ebcdic &nbsp; &nbsp;из ASCII в EBCDIC</p>
<p>&nbsp;ibm &nbsp; &nbsp; &nbsp; из ASCII в альтернативную EBCDIC</p>
<p>&nbsp;block &nbsp; &nbsp; дополнять записи, заканчивающиеся переводом строки, пробелами до размера cbs</p>
<p>&nbsp;unblock &nbsp; заменять завершающие пробелы в записях размера cbs на перевод строки</p>
<p>&nbsp;lcase &nbsp; &nbsp; изменять регистр с верхнего на нижний</p>
<p>&nbsp;ucase &nbsp; &nbsp; изменять регистр с нижнего на верхний</p>
<p>&nbsp;sparse &nbsp; &nbsp;попытаться переместиться, а не записывать в вывод NUL входных блоков</p>
<p>&nbsp;swab &nbsp; &nbsp; &nbsp;переставить местами каждую пару входных байт</p>
<p>&nbsp;sync &nbsp; &nbsp; &nbsp;дополнять каждый входной блок NUL-ми до размера ibs; при &nbsp;использовании с block или unblock, дополнять пробелам, а не NUL</p>
<p>&nbsp;excl &nbsp; &nbsp; &nbsp;завершать с ошибкой, если выходной файл уже существует</p>
<p>&nbsp;nocreat &nbsp; не создавать выходной файл</p>
<p>&nbsp;notrunc &nbsp; не обрезать выходной файл</p>
<p>&nbsp;noerror &nbsp; продолжать после ошибок чтения</p>
<p>&nbsp;fdatasync физически записать выходной файл перед завершением</p>
<p>&nbsp;fsync &nbsp; &nbsp; аналогично, но записать также метаданные</p>
<p>&nbsp;</p>
<p>Символ ФЛАГ может быть таким:</p>
<p>&nbsp;append &nbsp; &nbsp;режим добавления (имеет смысл для вывода; рекомендуется conv=notrunc)</p>
<p>&nbsp;direct &nbsp; &nbsp;использовать прямой ввод/вывод для данных</p>
<p>&nbsp;directory выдавать ошибку, если это не каталог</p>
<p>&nbsp;dsync &nbsp; &nbsp; использовать синхронизированный ввод/вывод для данных</p>
<p>&nbsp;sync &nbsp; &nbsp; &nbsp;то же, но так же и для метаданных</p>
<p>&nbsp;fullblock накапливать полные блоки входных данных (только iflag)</p>
<p>&nbsp;nonblock &nbsp;использовать неблокирующий ввод/вывод</p>
<p>&nbsp;noatime &nbsp; не обновлять время последнего доступа</p>
<p>&nbsp;nocache &nbsp; запрос на сброс кэша. Смотрите также oflag=sync</p>
<p>&nbsp;noctty &nbsp; &nbsp;не назначать управляющий терминал из файла</p>
<p>&nbsp;nofollow &nbsp;не следовать по символьным ссылкам</p>
<p>&nbsp;count_bytes &nbsp;считать «count=N» как счётчик байт (только с iflag)</p>
<p>&nbsp;skip_bytes &nbsp; считать «skip=N» как счётчик байт (только с iflag)</p>
<p>&nbsp;seek_bytes &nbsp; считать «seek=N» как счётчик байт (только с oflag)</p>
<p>&nbsp;</p>
<p>Если послать работающему процессу «dd» сигнал USR1, он напечатает на стандартный поток ошибок статистику ввода/вывода и продолжит копирование.</p>
<p>&nbsp;</p>
<p>Параметры:</p>
<p>&nbsp; &nbsp; &nbsp;--help &nbsp; &nbsp; показать эту справку и выйти</p>
<p>&nbsp; &nbsp; &nbsp;--version &nbsp;показать информацию о версии и выйти</p>
<p>&nbsp;</p>
<p>Страница справки по GNU coreutils: &lt;https://www.gnu.org/software/coreutils/&gt;</p>
<p>Об ошибках в переводе сообщений «dd» сообщайте по адресу &lt;gnu@d07.ru&gt;</p>
<p>Полная документация: &lt;https://www.gnu.org/software/coreutils/dd&gt; или доступная локально: info '(coreutils) dd invocation'</p>
<p>&nbsp;</p>

<!--
title: Устаревание apt-key
description: Warning: apt-key is deprecated. 
published: true
date: 2023-10-29T08:26:14.820Z
tags: debian, apt, ubuntu, deprecation, apt-key, apt-get
editor: ckeditor
dateCreated: 2023-10-29T08:06:39.701Z
-->

<p style="text-align:justify;">Команда <strong>apt-key</strong> управляет ключами, которые отвечают за проверку подписи репозиториев пакетов приложений.</p>
<p style="text-align:justify;">Время не стоит на месте и все меняется. Так и 2017 году появились обновления системе управления пакетами и теперь при любом использовании команды apt-key вы будете получать сообщение "<strong>Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).</strong>" Оно означает, что программа <strong>apt-ke</strong>y теперь устарела и для управления файлами ключей теперь используйте папку <strong>trusted.gpg.d.</strong> Если перевести на человеческий язык, теперь мы должны самостоятельно добавлять файлы в папку <strong>/etc/apt/trusted.gpg.d/</strong>.</p>
<p style="text-align:justify;">Несмотря на предупреждение, программа <strong>apt-key</strong> работает как обычно и выполняет все свои функции и эту команду не удалят ещё довольно долго, как минимум несколько лет. Поэтому, в принципе, можно не обращать внимание на предупреждение «apt-key is deprecated» и продолжать пользоваться копандой.</p>
<h4 style="text-align:justify;">Но давайте расмотрим варианты как добавлять ключи новым способом.</h4>
<p style="text-align:justify;">Если добавляется удалённый файл ключей:</p>
<p style="text-align:justify;"><code>curl -s <strong><u>URL</u></strong> | sudo gpg --no-default-keyring --keyring gnupg-ring:/etc/apt/trusted.gpg.d/<strong><u>ИМЯ</u></strong>.gpg --import</code></p>
<p style="text-align:justify;">Если добавляется локальный файл ключей:</p>
<p style="text-align:justify;"><code>cat <strong><u>ФАЙЛ</u></strong>.pub | sudo gpg --no-default-keyring --keyring gnupg-ring:/etc/apt/trusted.gpg.d/<strong><u>ИМЯ</u></strong>.gpg --import</code></p>
<p>В этих командах нужно следующие параметры заменить своими:</p>
<ul>
  <li><strong><u>URL</u></strong> — адрес файла .pub</li>
  <li><strong><u>ИМЯ</u></strong> — можно выбрать любое имя файла</li>
  <li><strong><u>ФАЙЛ</u></strong> — имя файла .pub</li>
</ul>
<blockquote>
  <p><strong>Внимание</strong>. Обязательно требуется обновить права доступа к файлам с 600 до 644 командой <code>sudo chmod 644 /etc/apt/trusted.gpg.d/<strong><u>ИМЯ</u></strong>.gpg</code></p>
</blockquote>
<h4>Чтобы просмотреть информацию об установленном ключе выполните команду:</h4>
<p><code>gpg --list-keys --keyring /etc/apt/trusted.gpg.d/<strong><u>ФАЙЛ</u></strong>.gpg</code></p>
<p>Как уже было сказано, старая команда тоже работает:</p>
<p><code>apt-key list</code></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
